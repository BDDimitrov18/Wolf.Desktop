<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:Wolf.Desktop.ViewModels"
             x:Class="Wolf.Desktop.Views.EditOrderView"
             x:DataType="vm:EditOrderViewModel"
             Background="{StaticResource BrushSurface}">

    <ScrollViewer>
        <StackPanel Spacing="0" MaxWidth="720" Margin="32">

            <!-- Header -->
            <StackPanel Orientation="Horizontal" Spacing="16" Margin="0,0,0,28">
                <TextBlock Text="{Binding FormTitle}"
                           FontSize="20" FontWeight="Bold"/>
            </StackPanel>

            <!-- Error message -->
            <Border IsVisible="{Binding ErrorMessage, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"
                    Background="#fceaea"
                    CornerRadius="6"
                    Padding="14,10"
                    Margin="0,0,0,16">
                <TextBlock Text="{Binding ErrorMessage}"
                           Foreground="#b83232"
                           FontSize="12"/>
            </Border>

            <!-- Form fields -->
            <Border Background="{StaticResource BrushSurfaceAlt}"
                    CornerRadius="8"
                    Padding="24"
                    Margin="0,0,0,16">
                <StackPanel Spacing="16">
                    <TextBlock Text="ДЕТАЙЛИ НА ПОРЪЧКА"
                               FontSize="10" FontWeight="Bold"
                               Foreground="{StaticResource BrushTextMuted}"
                               LetterSpacing="1"/>

                    <StackPanel Spacing="6">
                        <TextBlock Text="Име на поръчка" FontSize="12" FontWeight="Medium"/>
                        <TextBox Text="{Binding Requestname}"
                                 Watermark="Въведете име на поръчка..."/>
                    </StackPanel>

                    <StackPanel Spacing="6">
                        <TextBlock Text="Статус" FontSize="12" FontWeight="Medium"/>
                        <ComboBox ItemsSource="{x:Static vm:EditOrderViewModel.StatusOptions}"
                                  SelectedItem="{Binding Status}"
                                  HorizontalAlignment="Stretch"/>
                    </StackPanel>

                    <Grid ColumnDefinitions="*,16,*">
                        <StackPanel Grid.Column="0" Spacing="6">
                            <TextBlock Text="Цяла сума за финални продукти (евро.)" FontSize="12" FontWeight="Medium"/>
                            <TextBox Text="{Binding Price}"
                                     Watermark="0.00"/>
                        </StackPanel>
                        <StackPanel Grid.Column="2" Spacing="6">
                            <TextBlock Text="Аванс (лв.)" FontSize="12" FontWeight="Medium"/>
                            <TextBox Text="{Binding Advance}"
                                     Watermark="0.00"/>
                        </StackPanel>
                    </Grid>

                    <StackPanel Spacing="6">
                        <TextBlock Text="Коментари" FontSize="12" FontWeight="Medium"/>
                        <TextBox Text="{Binding Comments}"
                                 AcceptsReturn="True"
                                 Height="80"
                                 Watermark="Незадължителни коментари..."/>
                    </StackPanel>

                    <StackPanel Spacing="6">
                        <TextBlock Text="Файлов път" FontSize="12" FontWeight="Medium"/>
                        <TextBox Text="{Binding Path}"
                                 Watermark="Незадължителен файлов път..."/>
                    </StackPanel>

                    <StackPanel Spacing="6"
                                IsVisible="{Binding CreatorName, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">
                        <TextBlock Text="Създател" FontSize="12" FontWeight="Medium"/>
                        <Border Background="{StaticResource BrushBg}"
                                BorderBrush="{StaticResource BrushBorder}"
                                BorderThickness="1"
                                CornerRadius="6"
                                Padding="10,7">
                            <TextBlock Text="{Binding CreatorName}"
                                       FontSize="13"
                                       Foreground="{StaticResource BrushTextSecondary}"/>
                        </Border>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Actions -->
            <StackPanel Orientation="Horizontal" Spacing="10">
                <Button Classes="primary"
                        Command="{Binding SaveCommand}"
                        IsEnabled="{Binding IsBusy, Converter={x:Static BoolConverters.Not}}">
                    Запази поръчка
                </Button>
                <Button Command="{Binding CancelCommand}">
                    Отказ
                </Button>
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</UserControl>
